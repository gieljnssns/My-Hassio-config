alias: Emhass warmtepompboiler
id: 2dbe7701-5976-4ce8-aaad-0298d80cb019
trigger:
  # - minutes: /5
  #   platform: time_pattern
  #   id: update
  - platform: numeric_state
    entity_id: sensor.emhass_warmtepompboiler
    above: 1
  - platform: numeric_state
    entity_id: sensor.emhass_warmtepompboiler
    below: 1
    for: "00:00:25"
  #   id: turn_off
action:
  - choose:
      - conditions:
          - condition: numeric_state
            entity_id: sensor.emhass_warmtepompboiler
            above: 1
        sequence:
          - service: homeassistant.turn_on
            target:
              entity_id: input_boolean.emhass_warmtepompboiler
          - service: homeassistant.turn_on
            target:
              entity_id: switch.warm_water
      - conditions:
          - condition: numeric_state
            entity_id: sensor.emhass_warmtepompboiler
            below: 1
        sequence:
          - service: homeassistant.turn_off
            target:
              entity_id: input_boolean.emhass_warmtepompboiler
          - service: homeassistant.turn_off
            target:
              entity_id: switch.warm_water
