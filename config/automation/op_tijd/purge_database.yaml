alias: "Purge database"
id: ca43a372-7850-436b-94e5-5024377653be
trigger:
  - platform: time
    at: "03:12:00"
  - platform: time
    at: "04:12:00"
variables:
  a: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 0 %}
    {%- set b = part * 1 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  b: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 1 %}
    {%- set b = part * 2 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  c: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 2 %}
    {%- set b = part * 3 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  d: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 3 %}
    {%- set b = part * 4 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  e: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 4 %}
    {%- set b = part * 5 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  f: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 5 %}
    {%- set b = part * 6 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  g: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 6 %}
    {%- set b = part * 7 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  h: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 7 %}
    {%- set b = part * 8 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  i: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 8 %}
    {%- set b = part * 9 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  j: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 9 %}
    {%- set b = part * 10 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  k: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 10 %}
    {%- set b = part * 11 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  l: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 11 %}
    {%- set b = part * 12 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  m: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 12 %}
    {%- set b = part * 13 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  n: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 13 %}
    {%- set b = part * 14 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  o: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 14 %}
    {%- set b = part * 15 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  p: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 15 %}
    {%- set b = part * 16 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  q: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 16 %}
    {%- set b = part * 17 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  r: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 17 %}
    {%- set b = part * 18 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  s: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 18 %}
    {%- set b = part * 19 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  t: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 19 %}
    {%- set b = part * 20 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  aa: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 20 %}
    {%- set b = part * 21 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  bb: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 21 %}
    {%- set b = part * 22 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  cc: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 22 %}
    {%- set b = part * 23 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  dd: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 23 %}
    {%- set b = part * 24 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  ee: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 24 %}
    {%- set b = part * 25 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  ff: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 25 %}
    {%- set b = part * 26 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  gg: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 26 %}
    {%- set b = part * 27 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  hh: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 27 %}
    {%- set b = part * 28 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  ii: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 28 %}
    {%- set b = part * 29 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  jj: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 29 %}
    {%- set b = part * 30 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  kk: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 30 %}
    {%- set b = part * 31 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  ll: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 31 %}
    {%- set b = part * 32 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  mm: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 32 %}
    {%- set b = part * 33 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  nn: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 33 %}
    {%- set b = part * 34 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  oo: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 34 %}
    {%- set b = part * 35 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  pp: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 35 %}
    {%- set b = part * 36 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  qq: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 36 %}
    {%- set b = part * 37 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  rr: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 37 %}
    {%- set b = part * 38 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  ss: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 38 %}
    {%- set b = part * 39 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  tt: >
    {%- set part = (states("sensor.purge_entites_1") | float / 40) | int %}
    {%- set a = part * 39 %}
    {%- set b = part * 40 %}
    {{ state_attr("sensor.purge_entites_1", "list")[a:b] }}
  a2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 0 %}
    {%- set b = part * 1 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  b2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 1 %}
    {%- set b = part * 2 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  c2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 2 %}
    {%- set b = part * 3 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  d2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 3 %}
    {%- set b = part * 4 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  e2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 4 %}
    {%- set b = part * 5 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  f2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 5 %}
    {%- set b = part * 6 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  g2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 6 %}
    {%- set b = part * 7 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  h2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 7 %}
    {%- set b = part * 8 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  i2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 8 %}
    {%- set b = part * 9 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  j2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 9 %}
    {%- set b = part * 10 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  k2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 10 %}
    {%- set b = part * 11 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  l2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 11 %}
    {%- set b = part * 12 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  m2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 12 %}
    {%- set b = part * 13 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  n2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 13 %}
    {%- set b = part * 14 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  o2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 14 %}
    {%- set b = part * 15 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  p2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 15 %}
    {%- set b = part * 16 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  q2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 16 %}
    {%- set b = part * 17 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  r2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 17 %}
    {%- set b = part * 18 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  s2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 18 %}
    {%- set b = part * 19 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  t2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 19 %}
    {%- set b = part * 20 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  aa2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 20 %}
    {%- set b = part * 21 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  bb2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 21 %}
    {%- set b = part * 22 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  cc2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 22 %}
    {%- set b = part * 23 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  dd2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 23 %}
    {%- set b = part * 24 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  ee2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 24 %}
    {%- set b = part * 25 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  ff2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 25 %}
    {%- set b = part * 26 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  gg2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 26 %}
    {%- set b = part * 27 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  hh2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 27 %}
    {%- set b = part * 28 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  ii2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 28 %}
    {%- set b = part * 29 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  jj2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 29 %}
    {%- set b = part * 30 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  kk2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 30 %}
    {%- set b = part * 31 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  ll2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 31 %}
    {%- set b = part * 32 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  mm2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 32 %}
    {%- set b = part * 33 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  nn2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 33 %}
    {%- set b = part * 34 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  oo2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 34 %}
    {%- set b = part * 35 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  pp2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 35 %}
    {%- set b = part * 36 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  qq2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 36 %}
    {%- set b = part * 37 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  rr2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 37 %}
    {%- set b = part * 38 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  ss2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 38 %}
    {%- set b = part * 39 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
  tt2: >
    {%- set part = (states("sensor.purge_entites_2") | float / 40) | int %}
    {%- set a = part * 39 %}
    {%- set b = part * 40 %}
    {{ state_attr("sensor.purge_entites_2", "list")[a:b] }}
action:
  - choose:
      - conditions:
          - condition: template
            value_template: >
              {{ now().hour == 3 and now().day % 2 == 0 }}
        sequence:
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ a }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ b }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ c }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ d }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ e }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ f }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ g }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ h }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ i }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ j }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ k }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ l }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ m }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ n }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ o }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ p }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ q }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ r }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ s }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ t }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ aa }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ bb }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ cc }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ dd }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ ee }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ ff }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ gg }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ hh }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ ii }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ jj }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ kk }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ ll }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ mm }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ nn }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ oo }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ pp }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ qq }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ rr }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ ss }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ tt }}
      - conditions:
          - condition: template
            value_template: >
              {{ now().hour == 3 }}
        sequence:
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ a2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ b2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ c2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ d2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ e2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ f2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ g2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ h2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ i2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ j2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ k2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ l2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ m2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ n2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ o2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ p2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ q2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ r2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ s2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ t2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ aa2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ bb2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ cc2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ dd2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ ee2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ ff2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ gg2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ hh2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ ii2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ jj2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ kk2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ ll2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ mm2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ nn2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ oo2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ pp2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ qq2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ rr2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ ss2 }}
          - delay:
              seconds: 60
          - service: recorder.purge_entities
            data:
              keep_days: 8
            target:
              entity_id: >
                {{ tt2 }}
    default:
      - service: recorder.purge
        data:
          # keep_days: 365
          repack: true
