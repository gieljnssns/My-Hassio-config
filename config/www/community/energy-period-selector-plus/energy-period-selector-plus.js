function t(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r}const e=window,o=e.ShadowRoot&&(void 0===e.ShadyCSS||e.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,n=Symbol(),i=new WeakMap;class s{constructor(t,e,o){if(this._$cssResult$=!0,o!==n)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(o&&void 0===t){const o=void 0!==e&&1===e.length;o&&(t=i.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),o&&i.set(e,t))}return t}toString(){return this.cssText}}const r=(t,...e)=>{const o=1===t.length?t[0]:e.reduce(((e,o,n)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+t[n+1]),t[0]);return new s(o,t,n)},a=o?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const o of t.cssRules)e+=o.cssText;return(t=>new s("string"==typeof t?t:t+"",void 0,n))(e)})(t):t;var l;const c=window,d=c.trustedTypes,u=d?d.emptyScript:"",h=c.reactiveElementPolyfillSupport,p={toAttribute(t,e){switch(e){case Boolean:t=t?u:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let o=t;switch(e){case Boolean:o=null!==t;break;case Number:o=null===t?null:Number(t);break;case Object:case Array:try{o=JSON.parse(t)}catch(t){o=null}}return o}},_=(t,e)=>e!==t&&(e==e||t==t),m={attribute:!0,type:String,converter:p,reflect:!1,hasChanged:_};class g extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var e;this.finalize(),(null!==(e=this.h)&&void 0!==e?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,o)=>{const n=this._$Ep(o,e);void 0!==n&&(this._$Ev.set(n,o),t.push(n))})),t}static createProperty(t,e=m){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const o="symbol"==typeof t?Symbol():"__"+t,n=this.getPropertyDescriptor(t,o,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}}static getPropertyDescriptor(t,e,o){return{get(){return this[e]},set(n){const i=this[t];this[e]=n,this.requestUpdate(t,i,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||m}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),void 0!==t.h&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const o of e)this.createProperty(o,t[o])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const o=new Set(t.flat(1/0).reverse());for(const t of o)e.unshift(a(t))}else void 0!==t&&e.push(a(t));return e}static _$Ep(t,e){const o=e.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,o;(null!==(e=this._$ES)&&void 0!==e?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(o=t.hostConnected)||void 0===o||o.call(t))}removeController(t){var e;null===(e=this._$ES)||void 0===e||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const n=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,n)=>{o?t.adoptedStyleSheets=n.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):n.forEach((o=>{const n=document.createElement("style"),i=e.litNonce;void 0!==i&&n.setAttribute("nonce",i),n.textContent=o.cssText,t.appendChild(n)}))})(n,this.constructor.elementStyles),n}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,o){this._$AK(t,o)}_$EO(t,e,o=m){var n;const i=this.constructor._$Ep(t,o);if(void 0!==i&&!0===o.reflect){const s=(void 0!==(null===(n=o.converter)||void 0===n?void 0:n.toAttribute)?o.converter:p).toAttribute(e,o.type);this._$El=t,null==s?this.removeAttribute(i):this.setAttribute(i,s),this._$El=null}}_$AK(t,e){var o;const n=this.constructor,i=n._$Ev.get(t);if(void 0!==i&&this._$El!==i){const t=n.getPropertyOptions(i),s="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(o=t.converter)||void 0===o?void 0:o.fromAttribute)?t.converter:p;this._$El=i,this[i]=s.fromAttribute(e,t.type),this._$El=null}}requestUpdate(t,e,o){let n=!0;void 0!==t&&(((o=o||this.constructor.getPropertyOptions(t)).hasChanged||_)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===o.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,o))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,e)=>this[e]=t)),this._$Ei=void 0);let e=!1;const o=this._$AL;try{e=this.shouldUpdate(o),e?(this.willUpdate(o),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(o)):this._$Ek()}catch(t){throw e=!1,this._$Ek(),t}e&&this._$AE(o)}willUpdate(t){}_$AE(t){var e;null===(e=this._$ES)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$EO(e,this[e],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}var f;g.finalized=!0,g.elementProperties=new Map,g.elementStyles=[],g.shadowRootOptions={mode:"open"},null==h||h({ReactiveElement:g}),(null!==(l=c.reactiveElementVersions)&&void 0!==l?l:c.reactiveElementVersions=[]).push("1.6.1");const v=window,y=v.trustedTypes,b=y?y.createPolicy("lit-html",{createHTML:t=>t}):void 0,$="$lit$",w=`lit$${(Math.random()+"").slice(9)}$`,A="?"+w,S=`<${A}>`,E=document,D=()=>E.createComment(""),C=t=>null===t||"object"!=typeof t&&"function"!=typeof t,k=Array.isArray,T="[ \t\n\f\r]",x=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,P=/-->/g,M=/>/g,H=RegExp(`>|${T}(?:([^\\s"'>=/]+)(${T}*=${T}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),O=/'/g,N=/"/g,I=/^(?:script|style|textarea|title)$/i,L=(t,...e)=>({_$litType$:1,strings:t,values:e}),R=Symbol.for("lit-noChange"),j=Symbol.for("lit-nothing"),B=new WeakMap,z=E.createTreeWalker(E,129,null,!1);class U{constructor({strings:t,_$litType$:e},o){let n;this.parts=[];let i=0,s=0;const r=t.length-1,a=this.parts,[l,c]=((t,e)=>{const o=t.length-1,n=[];let i,s=2===e?"<svg>":"",r=x;for(let e=0;e<o;e++){const o=t[e];let a,l,c=-1,d=0;for(;d<o.length&&(r.lastIndex=d,l=r.exec(o),null!==l);)d=r.lastIndex,r===x?"!--"===l[1]?r=P:void 0!==l[1]?r=M:void 0!==l[2]?(I.test(l[2])&&(i=RegExp("</"+l[2],"g")),r=H):void 0!==l[3]&&(r=H):r===H?">"===l[0]?(r=null!=i?i:x,c=-1):void 0===l[1]?c=-2:(c=r.lastIndex-l[2].length,a=l[1],r=void 0===l[3]?H:'"'===l[3]?N:O):r===N||r===O?r=H:r===P||r===M?r=x:(r=H,i=void 0);const u=r===H&&t[e+1].startsWith("/>")?" ":"";s+=r===x?o+S:c>=0?(n.push(a),o.slice(0,c)+$+o.slice(c)+w+u):o+w+(-2===c?(n.push(void 0),e):u)}const a=s+(t[o]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==b?b.createHTML(a):a,n]})(t,e);if(this.el=U.createElement(l,o),z.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(n=z.nextNode())&&a.length<r;){if(1===n.nodeType){if(n.hasAttributes()){const t=[];for(const e of n.getAttributeNames())if(e.endsWith($)||e.startsWith(w)){const o=c[s++];if(t.push(e),void 0!==o){const t=n.getAttribute(o.toLowerCase()+$).split(w),e=/([.?@])?(.*)/.exec(o);a.push({type:1,index:i,name:e[2],strings:t,ctor:"."===e[1]?Y:"?"===e[1]?G:"@"===e[1]?J:K})}else a.push({type:6,index:i})}for(const e of t)n.removeAttribute(e)}if(I.test(n.tagName)){const t=n.textContent.split(w),e=t.length-1;if(e>0){n.textContent=y?y.emptyScript:"";for(let o=0;o<e;o++)n.append(t[o],D()),z.nextNode(),a.push({type:2,index:++i});n.append(t[e],D())}}}else if(8===n.nodeType)if(n.data===A)a.push({type:2,index:i});else{let t=-1;for(;-1!==(t=n.data.indexOf(w,t+1));)a.push({type:7,index:i}),t+=w.length-1}i++}}static createElement(t,e){const o=E.createElement("template");return o.innerHTML=t,o}}function V(t,e,o=t,n){var i,s,r,a;if(e===R)return e;let l=void 0!==n?null===(i=o._$Co)||void 0===i?void 0:i[n]:o._$Cl;const c=C(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(s=null==l?void 0:l._$AO)||void 0===s||s.call(l,!1),void 0===c?l=void 0:(l=new c(t),l._$AT(t,o,n)),void 0!==n?(null!==(r=(a=o)._$Co)&&void 0!==r?r:a._$Co=[])[n]=l:o._$Cl=l),void 0!==l&&(e=V(t,l._$AS(t,e.values),l,n)),e}class W{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var e;const{el:{content:o},parts:n}=this._$AD,i=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:E).importNode(o,!0);z.currentNode=i;let s=z.nextNode(),r=0,a=0,l=n[0];for(;void 0!==l;){if(r===l.index){let e;2===l.type?e=new F(s,s.nextSibling,this,t):1===l.type?e=new l.ctor(s,l.name,l.strings,this,t):6===l.type&&(e=new q(s,this,t)),this._$AV.push(e),l=n[++a]}r!==(null==l?void 0:l.index)&&(s=z.nextNode(),r++)}return i}v(t){let e=0;for(const o of this._$AV)void 0!==o&&(void 0!==o.strings?(o._$AI(t,o,e),e+=o.strings.length-2):o._$AI(t[e])),e++}}class F{constructor(t,e,o,n){var i;this.type=2,this._$AH=j,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=o,this.options=n,this._$Cp=null===(i=null==n?void 0:n.isConnected)||void 0===i||i}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===(null==t?void 0:t.nodeType)&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=V(this,t,e),C(t)?t===j||null==t||""===t?(this._$AH!==j&&this._$AR(),this._$AH=j):t!==this._$AH&&t!==R&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):(t=>k(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]))(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==j&&C(this._$AH)?this._$AA.nextSibling.data=t:this.$(E.createTextNode(t)),this._$AH=t}g(t){var e;const{values:o,_$litType$:n}=t,i="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=U.createElement(n.h,this.options)),n);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===i)this._$AH.v(o);else{const t=new W(i,this),e=t.u(this.options);t.v(o),this.$(e),this._$AH=t}}_$AC(t){let e=B.get(t.strings);return void 0===e&&B.set(t.strings,e=new U(t)),e}T(t){k(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let o,n=0;for(const i of t)n===e.length?e.push(o=new F(this.k(D()),this.k(D()),this,this.options)):o=e[n],o._$AI(i),n++;n<e.length&&(this._$AR(o&&o._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var o;for(null===(o=this._$AP)||void 0===o||o.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cp=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class K{constructor(t,e,o,n,i){this.type=1,this._$AH=j,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=i,o.length>2||""!==o[0]||""!==o[1]?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=j}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,o,n){const i=this.strings;let s=!1;if(void 0===i)t=V(this,t,e,0),s=!C(t)||t!==this._$AH&&t!==R,s&&(this._$AH=t);else{const n=t;let r,a;for(t=i[0],r=0;r<i.length-1;r++)a=V(this,n[o+r],e,r),a===R&&(a=this._$AH[r]),s||(s=!C(a)||a!==this._$AH[r]),a===j?t=j:t!==j&&(t+=(null!=a?a:"")+i[r+1]),this._$AH[r]=a}s&&!n&&this.j(t)}j(t){t===j?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class Y extends K{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===j?void 0:t}}const Z=y?y.emptyScript:"";class G extends K{constructor(){super(...arguments),this.type=4}j(t){t&&t!==j?this.element.setAttribute(this.name,Z):this.element.removeAttribute(this.name)}}class J extends K{constructor(t,e,o,n,i){super(t,e,o,n,i),this.type=5}_$AI(t,e=this){var o;if((t=null!==(o=V(this,t,e,0))&&void 0!==o?o:j)===R)return;const n=this._$AH,i=t===j&&n!==j||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,s=t!==j&&(n===j||i);i&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,o;"function"==typeof this._$AH?this._$AH.call(null!==(o=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==o?o:this.element,t):this._$AH.handleEvent(t)}}class q{constructor(t,e,o){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(t){V(this,t)}}const Q=v.litHtmlPolyfillSupport;var X,tt;null==Q||Q(U,F),(null!==(f=v.litHtmlVersions)&&void 0!==f?f:v.litHtmlVersions=[]).push("2.7.3");class et extends g{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const o=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=o.firstChild),o}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,o)=>{var n,i;const s=null!==(n=null==o?void 0:o.renderBefore)&&void 0!==n?n:e;let r=s._$litPart$;if(void 0===r){const t=null!==(i=null==o?void 0:o.renderBefore)&&void 0!==i?i:null;s._$litPart$=r=new F(e.insertBefore(D(),t),t,void 0,null!=o?o:{})}return r._$AI(t),r})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return R}}et.finalized=!0,et._$litElement$=!0,null===(X=globalThis.litElementHydrateSupport)||void 0===X||X.call(globalThis,{LitElement:et});const ot=globalThis.litElementPolyfillSupport;null==ot||ot({LitElement:et}),(null!==(tt=globalThis.litElementVersions)&&void 0!==tt?tt:globalThis.litElementVersions=[]).push("3.3.2");const nt=t=>e=>"function"==typeof e?((t,e)=>(customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:o,elements:n}=e;return{kind:o,elements:n,finisher(e){customElements.define(t,e)}}})(t,e),it=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(o){o.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(o){o.createProperty(e.key,t)}};function st(t){return(e,o)=>void 0!==o?((t,e,o)=>{e.constructor.createProperty(o,t)})(t,e,o):it(t,e)}function rt(t){return st({...t,state:!0})}var at;function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ct(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function dt(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function ut(t){dt(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"===lt(t)&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function ht(t,e){dt(2,arguments);var o=ut(t),n=ct(e);return isNaN(n)?new Date(NaN):n?(o.setDate(o.getDate()+n),o):o}function pt(t,e){dt(2,arguments);var o=ut(t),n=ct(e);if(isNaN(n))return new Date(NaN);if(!n)return o;var i=o.getDate(),s=new Date(o.getTime());return s.setMonth(o.getMonth()+n+1,0),i>=s.getDate()?s:(o.setFullYear(s.getFullYear(),s.getMonth(),i),o)}function _t(t,e){dt(2,arguments);var o=ut(t).getTime(),n=ct(e);return new Date(o+n)}function mt(t,e){return dt(2,arguments),_t(t,36e5*ct(e))}null===(at=window.HTMLSlotElement)||void 0===at||at.prototype.assignedElements;var gt={};function ft(){return gt}function vt(t,e){var o,n,i,s,r,a,l,c;dt(1,arguments);var d=ft(),u=ct(null!==(o=null!==(n=null!==(i=null!==(s=null==e?void 0:e.weekStartsOn)&&void 0!==s?s:null==e||null===(r=e.locale)||void 0===r||null===(a=r.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:d.weekStartsOn)&&void 0!==n?n:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==o?o:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=ut(t),p=h.getDay(),_=(p<u?7:0)+p-u;return h.setDate(h.getDate()-_),h.setHours(0,0,0,0),h}function yt(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function bt(t){dt(1,arguments);var e=ut(t);return e.setHours(0,0,0,0),e}function $t(t,e){return dt(2,arguments),ht(t,7*ct(e))}function wt(t,e){return dt(2,arguments),pt(t,12*ct(e))}function At(t,e){var o=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return o<0?-1:o>0?1:o}function St(t,e){dt(2,arguments);var o=ut(t),n=ut(e),i=At(o,n),s=Math.abs(function(t,e){dt(2,arguments);var o=bt(t),n=bt(e),i=o.getTime()-yt(o),s=n.getTime()-yt(n);return Math.round((i-s)/864e5)}(o,n));o.setDate(o.getDate()-i*s);var r=i*(s-Number(At(o,n)===-i));return 0===r?0:r}function Et(t){dt(1,arguments);var e=ut(t);return e.setHours(23,59,59,999),e}function Dt(t){dt(1,arguments);var e=ut(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Ct(t){dt(1,arguments);var e=ut(t),o=new Date(0);return o.setFullYear(e.getFullYear(),0,1),o.setHours(0,0,0,0),o}function kt(){return Et(Date.now())}function Tt(){return bt(Date.now())}var xt,Pt,Mt,Ht={en:"US",hi:"IN",deva:"IN",te:"IN",mr:"IN",ta:"IN",gu:"IN",kn:"IN",or:"IN",ml:"IN",pa:"IN",bho:"IN",awa:"IN",as:"IN",mwr:"IN",mai:"IN",mag:"IN",bgc:"IN",hne:"IN",dcc:"IN",bn:"BD",beng:"BD",rkt:"BD",dz:"BT",tibt:"BT",tn:"BW",am:"ET",ethi:"ET",om:"ET",quc:"GT",id:"ID",jv:"ID",su:"ID",mad:"ID",ms_arab:"ID",he:"IL",hebr:"IL",jam:"JM",ja:"JP",jpan:"JP",km:"KH",khmr:"KH",ko:"KR",kore:"KR",lo:"LA",laoo:"LA",mh:"MH",my:"MM",mymr:"MM",mt:"MT",ne:"NP",fil:"PH",ceb:"PH",ilo:"PH",ur:"PK",pa_arab:"PK",lah:"PK",ps:"PK",sd:"PK",skr:"PK",gn:"PY",th:"TH",thai:"TH",tts:"TH",zh_hant:"TW",hant:"TW",sm:"WS",zu:"ZA",sn:"ZW",arq:"DZ",ar:"EG",arab:"EG",arz:"EG",fa:"IR",az_arab:"IR",dv:"MV",thaa:"MV"},Ot={AG:0,ATG:0,28:0,AS:0,ASM:0,16:0,BD:0,BGD:0,50:0,BR:0,BRA:0,76:0,BS:0,BHS:0,44:0,BT:0,BTN:0,64:0,BW:0,BWA:0,72:0,BZ:0,BLZ:0,84:0,CA:0,CAN:0,124:0,CO:0,COL:0,170:0,DM:0,DMA:0,212:0,DO:0,DOM:0,214:0,ET:0,ETH:0,231:0,GT:0,GTM:0,320:0,GU:0,GUM:0,316:0,HK:0,HKG:0,344:0,HN:0,HND:0,340:0,ID:0,IDN:0,360:0,IL:0,ISR:0,376:0,IN:0,IND:0,356:0,JM:0,JAM:0,388:0,JP:0,JPN:0,392:0,KE:0,KEN:0,404:0,KH:0,KHM:0,116:0,KR:0,KOR:0,410:0,LA:0,LA0:0,418:0,MH:0,MHL:0,584:0,MM:0,MMR:0,104:0,MO:0,MAC:0,446:0,MT:0,MLT:0,470:0,MX:0,MEX:0,484:0,MZ:0,MOZ:0,508:0,NI:0,NIC:0,558:0,NP:0,NPL:0,524:0,PA:0,PAN:0,591:0,PE:0,PER:0,604:0,PH:0,PHL:0,608:0,PK:0,PAK:0,586:0,PR:0,PRI:0,630:0,PT:0,PRT:0,620:0,PY:0,PRY:0,600:0,SA:0,SAU:0,682:0,SG:0,SGP:0,702:0,SV:0,SLV:0,222:0,TH:0,THA:0,764:0,TT:0,TTO:0,780:0,TW:0,TWN:0,158:0,UM:0,UMI:0,581:0,US:0,USA:0,840:0,VE:0,VEN:0,862:0,VI:0,VIR:0,850:0,WS:0,WSM:0,882:0,YE:0,YEM:0,887:0,ZA:0,ZAF:0,710:0,ZW:0,ZWE:0,716:0,AE:6,ARE:6,784:6,AF:6,AFG:6,4:6,BH:6,BHR:6,48:6,DJ:6,DJI:6,262:6,DZ:6,DZA:6,12:6,EG:6,EGY:6,818:6,IQ:6,IRQ:6,368:6,IR:6,IRN:6,364:6,JO:6,JOR:6,400:6,KW:6,KWT:6,414:6,LY:6,LBY:6,434:6,OM:6,OMN:6,512:6,QA:6,QAT:6,634:6,SD:6,SDN:6,729:6,SY:6,SYR:6,760:6,MV:5,MDV:5,462:5};!function(t){t.language="language",t.system="system",t.comma_decimal="comma_decimal",t.decimal_comma="decimal_comma",t.space_comma="space_comma",t.none="none"}(xt||(xt={})),function(t){t.language="language",t.system="system",t.am_pm="12",t.twenty_four="24"}(Pt||(Pt={})),function(t){t.language="language",t.monday="monday",t.tuesday="tuesday",t.wednesday="wednesday",t.thursday="thursday",t.friday="friday",t.saturday="saturday",t.sunday="sunday"}(Mt||(Mt={}));const Nt=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],It=t=>t.first_weekday===Mt.language?"weekInfo"in Intl.Locale.prototype?new Intl.Locale(t.language).weekInfo.firstDay%7:function(t){return function(t,e,o){if(t){var n,i=t.toLowerCase().split(/[-_]/),s=i[0],r=s;if(i[1]&&4===i[1].length?(r+="_"+i[1],n=i[2]):n=i[1],n||(n=e[r]||e[s]),n)return function(t,e){var o=e["string"==typeof t?t.toUpperCase():t];return"number"==typeof o?o:1}(n.match(/^\d+$/)?Number(n):n,o)}return 1}(t,Ht,Ot)}(t.language)%7:Nt.includes(t.first_weekday)?Nt.indexOf(t.first_weekday):1;var Lt=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function Rt(t,e){if(t.length!==e.length)return!1;for(var o=0;o<t.length;o++)if(!((n=t[o])===(i=e[o])||Lt(n)&&Lt(i)))return!1;var n,i;return!0}function jt(t,e){void 0===e&&(e=Rt);var o=null;function n(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(o&&o.lastThis===this&&e(n,o.lastArgs))return o.lastResult;var s=t.apply(this,n);return o={lastResult:s,lastArgs:n,lastThis:this},s}return n.clear=function(){o=null},n}jt((t=>new Intl.DateTimeFormat(t.language,{weekday:"long",month:"long",day:"numeric"})));const Bt=jt((t=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric"})));jt((t=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"numeric",day:"numeric"})));const zt=(t,e)=>Ut(e).format(t),Ut=jt((t=>new Intl.DateTimeFormat(t.language,{day:"numeric",month:"short"}))),Vt=jt((t=>new Intl.DateTimeFormat(t.language,{month:"long",year:"numeric"})));jt((t=>new Intl.DateTimeFormat(t.language,{month:"long"})));const Wt=jt((t=>new Intl.DateTimeFormat(t.language,{year:"numeric"})));jt((t=>new Intl.DateTimeFormat(t.language,{weekday:"long"})));const Ft=t=>{let e=[];function o(o,n){t=n?o:Object.assign(Object.assign({},t),o);let i=e;for(let e=0;e<i.length;e++)i[e](t)}return{get state(){return t},action(e){function n(t){o(t,!1)}return function(){let o=[t];for(let t=0;t<arguments.length;t++)o.push(arguments[t]);let i=e.apply(this,o);if(null!=i)return i instanceof Promise?i.then(n):n(i)}},setState:o,subscribe:t=>(e.push(t),()=>{!function(t){let o=[];for(let n=0;n<e.length;n++)e[n]===t?t=null:o.push(e[n]);e=o}(t)})}},Kt=(t,e)=>{const o={};return e&&(e.type&&(o.type_filter=e.type),e.domain&&(o.domain=e.domain)),t.callWS(Object.assign({type:"config_entries/get"},o))},Yt=(t,e,o,n,i="hour",s,r)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==o?void 0:o.toISOString(),statistic_ids:n,period:i,units:s,types:r}),Zt=[],Gt=t=>t.callWS({type:"energy/info"}),Jt=async(t,e,o,n,i,s="hour")=>t.callWS({type:"energy/fossil_energy_consumption",start_time:e.toISOString(),end_time:null==i?void 0:i.toISOString(),energy_statistic_ids:o,co2_statistic_id:n,period:s}),qt=(t,e,o)=>{const n=[];for(const i of t.energy_sources)if(!o||o.includes(i.type))if("solar"!==i.type)if("gas"!==i.type&&"water"!==i.type)if("battery"!==i.type){for(const t of i.flow_from){n.push(t.stat_energy_from),t.stat_cost&&n.push(t.stat_cost);const o=e.cost_sensors[t.stat_energy_from];o&&n.push(o)}for(const t of i.flow_to){n.push(t.stat_energy_to),t.stat_compensation&&n.push(t.stat_compensation);const o=e.cost_sensors[t.stat_energy_to];o&&n.push(o)}}else n.push(i.stat_energy_from),n.push(i.stat_energy_to);else{n.push(i.stat_energy_from),i.stat_cost&&n.push(i.stat_cost);const t=e.cost_sensors[i.stat_energy_from];t&&n.push(t)}else n.push(i.stat_energy_from);return n},Qt=(t,e={})=>{let o="_energy";if(e.key){if(!e.key.startsWith("energy_"))throw new Error("Key need to start with energy_");o=`_${e.key}`}if(t.connection[o])return t.connection[o];Zt.push(e.key);const n=((t,e,o,n)=>{if(t[e])return t[e];let i,s,r=0,a=Ft();const l=()=>{if(!o)throw new Error("Collection does not support refresh");return o(t).then((t=>a.setState(t,!0)))},c=()=>l().catch((e=>{if(t.connected)throw e})),d=()=>{s=void 0,i&&i.then((t=>{t()})),t.removeEventListener("ready",l),t.removeEventListener("disconnected",u)},u=()=>{s&&(clearTimeout(s),d())};return t[e]={get state(){return a.state},refresh:l,subscribe(e){r++,1===r&&(()=>{if(void 0!==s)return clearTimeout(s),void(s=void 0);n&&(i=n(t,a)),o&&(t.addEventListener("ready",c),c()),t.addEventListener("disconnected",u)})();const l=a.subscribe(e);return void 0!==a.state&&setTimeout((()=>e(a.state)),0),()=>{l(),r--,r||(s=setTimeout(d,5e3))}}},t[e]})(t.connection,o,(async()=>{if(n.prefs||(n.prefs=await(t=>t.callWS({type:"energy/get_prefs"}))(t)),n._refreshTimeout&&clearTimeout(n._refreshTimeout),n._active&&(!n.end||n.end>new Date)){const t=new Date;t.getMinutes()>=20&&t.setHours(t.getHours()+1),t.setMinutes(20,0,0),n._refreshTimeout=window.setTimeout((()=>n.refresh()),t.getTime()-Date.now())}return(async(t,e,o,n,i)=>{const[s,r]=await Promise.all([Kt(t,{domain:"co2signal"}),Gt(t)]),a=s.length?s[0]:void 0;let l;if(a)for(const e of Object.values(t.entities)){if("co2signal"!==e.platform)continue;const o=t.states[e.entity_id];if(o&&"%"===o.attributes.unit_of_measurement){l=o.entity_id;break}}const c=[];for(const t of e.energy_sources)if("grid"===t.type)for(const e of t.flow_from)c.push(e.stat_energy_from);const d=qt(e,r,["grid","solar","battery","gas"]),u=qt(e,r,["water"]),h=[...d,...u],p=St(n||new Date,o),_=p>35?"month":p>2?"day":"hour",m=mt(o,-1),g=t.config.unit_system.length||"",f={energy:"kWh",volume:"km"===g?"m³":"ft³"},v={volume:"km"===g?"L":"gal"},y=d.length?Yt(t,m,n,d,_,f,["sum"]):{},b=u.length?Yt(t,m,n,u,_,v,["sum"]):{};let $,w,A,S,E,D={},C={};if(i){w=p>27&&p<32?pt(o,-1):ht(o,-1*(p+1));const e=mt(w,-1);A=_t(o,-1),d.length&&(D=Yt(t,e,A,d,_,f,["sum"])),u.length&&(C=Yt(t,e,A,u,_,v,["sum"]))}void 0!==l&&(S=Jt(t,o,c,l,n,p>35?"month":p>2?"day":"hour"),i&&(E=Jt(t,w,c,l,A,p>35?"month":p>2?"day":"hour")));const k={},T=h.length?((t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}))(t,h):[],[x,P,M,H,O,N,I]=await Promise.all([y,b,D,C,T,S,E]),L=Object.assign(Object.assign({},x),P);return i&&($=Object.assign(Object.assign({},M),H)),h.length&&O.forEach((t=>{k[t.statistic_id]=t})),Object.values(L).forEach((t=>{t.length&&new Date(t[0].start)>m&&t.unshift(Object.assign(Object.assign({},t[0]),{start:m.getTime(),end:m.getTime(),sum:0,state:0}))})),{start:o,end:n,startCompare:w,endCompare:A,info:r,prefs:e,stats:L,statsMetadata:k,statsCompare:$,co2SignalConfigEntry:a,co2SignalEntity:l,fossilEnergyConsumption:N,fossilEnergyConsumptionCompare:I}})(t,n.prefs,n.start,n.end,n.compare)})),i=n.subscribe;n.subscribe=t=>{const e=i(t);return n._active++,()=>{n._active--,n._active<1&&(clearTimeout(n._refreshTimeout),n._refreshTimeout=void 0),e()}},n._active=0,n.prefs=e.prefs;const s=new Date;n.start=s.getHours()>0?Tt():function(){var t=new Date,e=t.getFullYear(),o=t.getMonth(),n=t.getDate(),i=new Date(0);return i.setFullYear(e,o,n-1),i.setHours(0,0,0,0),i}(),n.end=s.getHours()>0?kt():function(){var t=new Date,e=t.getFullYear(),o=t.getMonth(),n=t.getDate(),i=new Date(0);return i.setFullYear(e,o,n-1),i.setHours(23,59,59,999),i}();const r=()=>{n._updatePeriodTimeout=window.setTimeout((()=>{n.start=Tt(),n.end=kt(),r()}),mt(kt(),1).getTime()-Date.now())};return r(),n.clearPrefs=()=>{n.prefs=void 0},n.setPeriod=(t,e)=>{var o;n.start=t,n.end=e,n.start.getTime()!==Tt().getTime()||(null===(o=n.end)||void 0===o?void 0:o.getTime())!==kt().getTime()||n._updatePeriodTimeout?n._updatePeriodTimeout&&(clearTimeout(n._updatePeriodTimeout),n._updatePeriodTimeout=void 0):r()},n.setCompare=t=>{n.compare=t},n},Xt=e=>{class o extends e{connectedCallback(){super.connectedCallback(),this.__checkSubscribed()}disconnectedCallback(){super.disconnectedCallback(),this.hassUnsubscribe()}updated(t){super.updated(t),t.has("hass")&&this.__checkSubscribed()}resetSubscriptions(){this.hassUnsubscribe(),this.__checkSubscribed()}hassSubscribe(){return[]}hassUnsubscribe(){if(this.__unsubs){for(;this.__unsubs.length;){const t=this.__unsubs.pop();t instanceof Promise?t.then((t=>t())):t()}this.__unsubs=void 0}}__checkSubscribed(){void 0===this.__unsubs&&this.isConnected&&void 0!==this.hass&&(this.__unsubs=this.hassSubscribe())}}return t([st({attribute:!1})],o.prototype,"hass",void 0),o};var te={version:"Version",invalid_configuration:"Invalid configuration",show_warning:"Show Warning",entity_not_found:"Entity state not found",missing_child:"Missing child entity",loading:"Loading..."},ee={custom:"Custom"},oe={yaml_disclaimer:"Please use yaml mode for the other options",docs:"Documentation",sections:"Sections",section:"Section",add_section:"+ Add section",add_entity:"+ Add entity",entity_editor:"Entity editor",decimals:"decimals",fields:{card_background:"Card Background",prev_next_buttons:"Show Previous/Next Buttons",compare_button_type:"Compare Button Type",custom_period_label:"Custom Period Label",compare_button_options:{icon:"Icon",text:"Text"},period_buttons:"Period Buttons",today_button_type:"Today Button Type",compare_button_label:"Compare Button Label",period_buttons_options:{day:"Day",week:"Week",month:"Month",year:"Year",custom:"Custom"}},entity_types:{entity:"Entity",remaining_parent_state:"Remaining parent state",remaining_child_state:"Remaining child state",passthrough:"Passthrough"}},ne={common:te,toggleButtons:ee,editor:oe},ie={version:"Version",invalid_configuration:"Ungültige Konfiguration",show_warning:"Warnung anzeigen",entity_not_found:"Entitätsstatus nicht gefunden",missing_child:"Fehlende Kind-Entität",loading:"Laden..."},se={custom:"Benutzerdefiniert"},re={yaml_disclaimer:"Bitte verwenden Sie den YAML-Modus für die anderen Optionen",docs:"Dokumentation",sections:"Abschnitte",section:"Abschnitt",add_section:"+ Abschnitt hinzufügen",add_entity:"+ Entität hinzufügen",entity_editor:"Entitätseditor",decimals:"Nachkommastellen",fields:{card_background:"Kartenhintergrund",prev_next_buttons:"Vorherige/Nächste Schaltflächen anzeigen",compare_button_type:"Vergleichstyp der Schaltfläche",custom_period_label:"Benutzerdefiniertes Zeitraster-Label",compare_button_options:{icon:"Symbol",text:"Text"},period_buttons:"Zeitraumschaltflächen",today_button_type:"Heutiger Schaltflächentyp",compare_button_label:"Beschriftung der Vergleichsschaltfläche",period_buttons_options:{day:"Tag",week:"Woche",month:"Monat",year:"Jahr",custom:"Benutzerdefiniert"}},entity_types:{entity:"Entität",remaining_parent_state:"Verbleibender Elternstatus",remaining_child_state:"Verbleibender Kindstatus",passthrough:"Durchleitung"}},ae={common:ie,toggleButtons:se,editor:re},le={version:"Versão",invalid_configuration:"Configuração inválida",show_warning:"Mostrar Aviso",entity_not_found:"Estado da entidade não encontrado",missing_child:"Entidade filha em falta",loading:"A carregar..."},ce={custom:"Personalizado"},de={yaml_disclaimer:"Por favor, utilize o modo yaml para as outras opções",docs:"Documentação",sections:"Secções",section:"Secção",add_section:"+ Adicionar secção",add_entity:"+ Adicionar entidade",entity_editor:"Editor de entidades",decimals:"casas decimais",fields:{card_background:"Fundo do cartão",prev_next_buttons:"Mostrar Botões de controle",compare_button_type:"Tipo de Botão para Comparar",custom_period_label:"Rótulo do Período Personalizado",compare_button_options:{icon:"Ícone",text:"Texto"},period_buttons:"Botões de Período",today_button_type:"Tipo de Botão Hoje",compare_button_label:"Rótulo do Botão Comparar",period_buttons_options:{day:"Dia",week:"Semana",month:"Mês",year:"Ano",custom:"Personalizado"}},entity_types:{entity:"Entidade",remaining_parent_state:"Estado pai restante",remaining_child_state:"Estado filho restante",passthrough:"Encaminhar"}},ue={common:le,toggleButtons:ce,editor:de},he={version:"Versión",invalid_configuration:"Configuración inválida",show_warning:"Mostrar advertencia",entity_not_found:"Estado de entidad no encontrado",missing_child:"Entidad secundaria faltante",loading:"Cargando..."},pe={custom:"Personalizado"},_e={yaml_disclaimer:"Por favor, utiliza el modo YAML para las otras opciones",docs:"Documentación",sections:"Secciones",section:"Sección",add_section:"+ Agregar sección",add_entity:"+ Agregar entidad",entity_editor:"Editor de entidades",decimals:"decimales",fields:{card_background:"Fondo de tarjeta",prev_next_buttons:"Mostrar botones Anterior/Siguiente",compare_button_type:"Tipo de botón de comparación",custom_period_label:"Etiqueta de período personalizada",compare_button_options:{icon:"Ícono",text:"Texto"},period_buttons:"Botones de período",today_button_type:"Tipo de botón Hoy",compare_button_label:"Etiqueta del botón de comparación",period_buttons_options:{day:"Día",week:"Semana",month:"Mes",year:"Año",custom:"Personalizado"}},entity_types:{entity:"Entidad",remaining_parent_state:"Estado del padre restante",remaining_child_state:"Estado del hijo restante",passthrough:"Pasar a través"}},me={common:he,toggleButtons:pe,editor:_e};const ge={en:Object.freeze({__proto__:null,common:te,toggleButtons:ee,editor:oe,default:ne}),de:Object.freeze({__proto__:null,common:ie,toggleButtons:se,editor:re,default:ae}),pt:Object.freeze({__proto__:null,common:le,toggleButtons:ce,editor:de,default:ue}),es:Object.freeze({__proto__:null,common:he,toggleButtons:pe,editor:_e,default:me})};function fe(t,e="",o=""){const n=(localStorage.getItem("selectedLanguage")||"en").replace(/['"]+/g,"").replace("-","_");let i;try{i=t.split(".").reduce(((t,e)=>t[e]),ge[n])}catch(e){i=t.split(".").reduce(((t,e)=>t[e]),ge.en)}return void 0===i&&(i=t.split(".").reduce(((t,e)=>t&&t[e]),ge.en)),""!==e&&""!==o&&(i=null==i?void 0:i.replace(e,o)),i}const ve=r`ha-card{padding:1rem}h1{padding:0;padding-bottom:1rem}`,ye=r`.date-range-container{box-sizing:border-box;display:flex;flex-direction:row;justify-content:flex-end;align-items:center;width:342px;gap:1rem}.mdc-text-field__icon .mdc-text-field__icon--trailing{padding-left:0}.row{display:flex;justify-content:end;align-items:center;flex-direction:row-reverse;flex-wrap:wrap-reverse;column-gap:1rem;row-gap:.5rem;min-width:342px}.label{display:flex;justify-content:flex-end;align-items:center;font-size:20px}.period{display:flex;flex-wrap:wrap-reverse;justify-content:flex-end;align-items:center;gap:1rem;margin-left:12px}mwc-button{margin-left:8px}ha-icon-button:not(.today-icon){margin-left:4px;--mdc-icon-size:20px}ha-icon-button.active::before,mwc-button.active::before{top:0;left:0;width:100%;height:100%;position:absolute;background-color:currentColor;opacity:0;pointer-events:none;content:'';transition:opacity 15ms linear,background-color 15ms linear;opacity:var(--mdc-icon-button-ripple-opacity,.12)}ha-icon-button.active::before{border-radius:50%}.compare{position:relative}:host{--mdc-button-outline-color:currentColor;--primary-color:currentColor;--mdc-theme-primary:currentColor;--mdc-theme-on-primary:currentColor;--mdc-button-disabled-outline-color:var(--disabled-text-color);--mdc-button-disabled-ink-color:var(--disabled-text-color);--mdc-icon-button-ripple-opacity:0.2}ha-icon-button:not(.today-icon){--mdc-icon-button-size:28px}ha-button-toggle-group{direction:var(--direction)}mwc-button{flex-shrink:0}`;let be=class extends(Xt(et)){constructor(){super(...arguments),this._compare=!1}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}async firstUpdated(){(await window.loadCardHelpers()).importMoreInfoControl("input_datetime")}hassSubscribe(){return[Qt(this.hass,{key:this.collectionKey}).subscribe((t=>this._updateDates(t)))]}render(){var t,e,o,n,i,s,r,a,l,c,d;if(!this.hass||!this._startDate)return j;const u=t=>{var e;return"custom"===t?(null===(e=this._config)||void 0===e?void 0:e.custom_period_label)||fe(`toggleButtons.${t}`)||t:this.hass.localize(`ui.components.calendar.event.rrule.${t}`)},h=(null===(t=this._config)||void 0===t?void 0:t.period_buttons)?this._config.period_buttons.map((t=>({label:u(t),value:t}))):[{label:this.hass.localize("ui.components.calendar.event.rrule.day"),value:"day"},{label:this.hass.localize("ui.components.calendar.event.rrule.week"),value:"week"},{label:this.hass.localize("ui.components.calendar.event.rrule.month"),value:"month"},{label:this.hass.localize("ui.components.calendar.event.rrule.year"),value:"year"}],p=L`<div class="date-range-container"><ha-date-input .locale="${this.hass.locale}" .value="${(null===(e=this._startDate)||void 0===e?void 0:e.toISOString())||""}" .label="${this.hass.localize("ui.components.date-range-picker.start_date")}" @value-changed="${this._startDateChanged}" .required="${!0}" .min="${"2019-01-01"}" .max="${(null===(o=this._endDate)||void 0===o?void 0:o.toISOString())||kt().toISOString()}"></ha-date-input><ha-date-input .locale="${this.hass.locale}" .value="${(null===(n=this._endDate)||void 0===n?void 0:n.toISOString())||""}" .label="${this.hass.localize("ui.components.date-range-picker.end_date")}" @value-changed="${this._endDateChanged}" .required="${!0}" .min="${this._startDate.toISOString()}" .max="${kt().toISOString()}"></ha-date-input></div>`,_=L`<mwc-button dense outlined @click="${this._pickToday}">${this.hass.localize("ui.panel.lovelace.components.energy_period_selector.today")}</mwc-button>`,m=L`<ha-icon-button @click="${this._pickToday}" class="today-icon" .label="${this.hass.localize("ui.panel.lovelace.components.energy_period_selector.today")}" .path="${"M19 3H18V1H16V3H8V1H6V3H5C3.9 3 3 3.89 3 5V19C3 20.11 3.9 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.89 20.11 3 19 3M19 19H5V9H19V19M19 7H5V5H19M7 11H12V16H7"}"></ha-icon-button>`,g=!1===(null===(i=this._config)||void 0===i?void 0:i.today_button_type)?j:"icon"===(null===(s=this._config)||void 0===s?void 0:s.today_button_type)?m:_;return L`<div class="row">${"custom"===this._period?p:L`<div class="label">${"day"===this._period?(v=this._startDate,y=this.hass.locale,Bt(y).format(v)):"month"===this._period?((t,e)=>Vt(e).format(t))(this._startDate,this.hass.locale):"year"===this._period?((t,e)=>Wt(e).format(t))(this._startDate,this.hass.locale):`${zt(this._startDate,this.hass.locale)} – ${zt(this._endDate||new Date,this.hass.locale)}`} ${!1!==(null===(r=this._config)||void 0===r?void 0:r.prev_next_buttons)?L`<ha-icon-button-prev .label="${this.hass.localize("ui.panel.lovelace.components.energy_period_selector.previous")}" @click="${this._pickPrevious}"></ha-icon-button-prev><ha-icon-button-next .label="${this.hass.localize("ui.panel.lovelace.components.energy_period_selector.next")}" @click="${this._pickNext}"></ha-icon-button-next>`:j} ${g}</div>`}<div class="period"><ha-button-toggle-group .buttons="${h}" .active="${this._period}" dense @value-changed="${this._handleView}" .dir="${f=this.hass,function(t){const e=t.language||"en";return t.translationMetadata.translations[e]&&t.translationMetadata.translations[e].isRTL||!1}(f)?"rtl":"ltr"}"></ha-button-toggle-group>${"icon"===(null===(a=this._config)||void 0===a?void 0:a.compare_button_type)?L`<ha-icon-button class="compare ${this._compare?"active":""}" .path="${this._compare?"M19 5H14V3H19C20.1 3 21 3.9 21 5V13.4C20.4 13.2 19.7 13 19 13V5M10 1H12V23H10V21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H10V1M10 12L5 18H10V12M15.7 14L14 12V15.7C14.4 15 15 14.5 15.7 14M21.1 15.5L19 17.6L16.9 15.5L15.5 16.9L17.6 19L15.5 21.1L16.9 22.5L19 20.4L21.1 22.5L22.5 21.1L20.4 19L22.5 16.9L21.1 15.5Z":"M19,3H14V5H19V18L14,12V21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M10,18H5L10,12M10,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H10V23H12V1H10V3Z"}" @click="${this._toggleCompare}" dense outlined>${null!==(l=this._config.compare_button_label)&&void 0!==l?l:this.hass.localize("ui.panel.lovelace.components.energy_period_selector.compare")}</ha-icon-button>`:"text"===(null===(c=this._config)||void 0===c?void 0:c.compare_button_type)?L`<mwc-button class="compare ${this._compare?"active":""}" @click="${this._toggleCompare}" dense outlined>${null!==(d=this._config.compare_button_label)&&void 0!==d?d:this.hass.localize("ui.panel.lovelace.components.energy_period_selector.compare")}</mwc-button>`:j}</div></div>`;var f,v,y}_startDateChanged(t){this._setDate(new Date(t.detail.value))}_endDateChanged(t){this._startDate&&new Date(t.detail.value)>this._startDate&&this._setDate(this._startDate,new Date(t.detail.value))}_handleView(t){this._period=t.detail.value;const e=Tt(),o=!this._startDate||function(t,e){dt(2,arguments);var o=ut(t).getTime(),n=ut(e.start).getTime(),i=ut(e.end).getTime();if(!(n<=i))throw new RangeError("Invalid interval");return o>=n&&o<=i}(e,{start:this._startDate,end:this._endDate||kt()})?e:this._startDate,n=It(this.hass.locale);this._setDate("day"===this._period?bt(o):"week"===this._period?vt(o,{weekStartsOn:n}):"month"===this._period?Dt(o):"year"===this._period?Ct(o):this._startDate||Tt(),"custom"===this._period?this._endDate:void 0)}_pickToday(){const t=It(this.hass.locale);this._setDate("day"===this._period?Tt():"week"===this._period?vt(new Date,{weekStartsOn:t}):"month"===this._period?Dt(new Date):Ct(new Date))}_pickPrevious(){const t="day"===this._period?ht(this._startDate,-1):"week"===this._period?$t(this._startDate,-1):"month"===this._period?pt(this._startDate,-1):"year"===this._period?wt(this._startDate,-1):ht(this._startDate,-1);this._setDate(t)}_pickNext(){const t="day"===this._period?ht(this._startDate,1):"week"===this._period?$t(this._startDate,1):"month"===this._period?pt(this._startDate,1):"year"===this._period?wt(this._startDate,1):ht(this._startDate,1);this._setDate(t)}_setDate(t,e){const o=It(this.hass.locale),n="day"===this._period?Et(t):"week"===this._period?function(t,e){var o,n,i,s,r,a,l,c;dt(1,arguments);var d=ft(),u=ct(null!==(o=null!==(n=null!==(i=null!==(s=null==e?void 0:e.weekStartsOn)&&void 0!==s?s:null==e||null===(r=e.locale)||void 0===r||null===(a=r.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:d.weekStartsOn)&&void 0!==n?n:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==o?o:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=ut(t),p=h.getDay(),_=6+(p<u?-7:0)-(p-u);return h.setDate(h.getDate()+_),h.setHours(23,59,59,999),h}(t,{weekStartsOn:o}):"month"===this._period?function(t){dt(1,arguments);var e=ut(t),o=e.getMonth();return e.setFullYear(e.getFullYear(),o+1,0),e.setHours(23,59,59,999),e}(t):"year"===this._period?function(t){dt(1,arguments);var e=ut(t),o=e.getFullYear();return e.setFullYear(o+1,0,0),e.setHours(23,59,59,999),e}(t):"custom"===this._period&&e?Et(e):this._endDate||kt(),i=Qt(this.hass);i.setPeriod(t,n),i.refresh()}_updateDates(t){this._compare=void 0!==t.startCompare,this._startDate=t.start,this._endDate=t.end||kt();const e=St(this._endDate,this._startDate||kt());this._period="custom"!==this._period?e<1?"day":6===e?"week":e>26&&e<31?"month":364===e||365===e?"year":"custom":"custom"}_toggleCompare(){this._compare=!this._compare;const t=Qt(this.hass);t.setCompare(this._compare),t.refresh()}};var $e,we;be.styles=ye,t([st({attribute:!1})],be.prototype,"hass",void 0),t([rt()],be.prototype,"_config",void 0),t([st()],be.prototype,"collectionKey",void 0),t([rt()],be.prototype,"_startDate",void 0),t([rt()],be.prototype,"_endDate",void 0),t([rt()],be.prototype,"_period",void 0),t([rt()],be.prototype,"_compare",void 0),be=t([nt("energy-period-selector-base")],be),function(t){t.language="language",t.system="system",t.comma_decimal="comma_decimal",t.decimal_comma="decimal_comma",t.space_comma="space_comma",t.none="none"}($e||($e={})),function(t){t.language="language",t.system="system",t.am_pm="12",t.twenty_four="24"}(we||(we={}));var Ae="0.0.1";console.groupCollapsed(`%c⚡ Energy Period Selector Plus v${Ae} is installed`,"color: #488fc2; font-weight: bold"),console.log("Readme:","https://github.com/flixlix/energy-period-selector-plus"),console.groupEnd();const Se=function(t,e,o){var n;return void 0===o&&(o=!1),function(){var e=[].slice.call(arguments),i=this,s=o&&!n;clearTimeout(n),n=setTimeout((function(){n=null,o||t.apply(i,e)}),6e4),s&&t.apply(i,e)}}((t=>{console.log(`%c⚡ Energy Period Selector Plus v${Ae} %cError: ${t}`,"color: #488fc2; font-weight: bold","color: #b33a3a; font-weight: normal")}));!function(t){const e=window;e.customCards=e.customCards||[],e.customCards.push(Object.assign(Object.assign({},{type:"energy-period-selector-plus",name:"Energy Period Selector Plus",description:"A custom card to change the Energy Period of your Energy Data."}),{preview:!0,documentationURL:"https://github.com/flixlix/energy-period-selector-plus"}))}();let Ee=class extends et{getCardSize(){return 1}static async getConfigElement(){return await Promise.resolve().then((function(){return Ve})),document.createElement("energy-period-selector-editor")}setConfig(t){this._config=t}render(){var t,e;if(!this.hass||!this._config)return Se(fe("common.invalid_configuration")||"Invalid configuration"),j;const o=L`<energy-period-selector-base .hass="${this.hass}" ._config="${this._config}"></energy-period-selector-base>`;return(null===(t=this._config)||void 0===t?void 0:t.card_background)?L`<ha-card .header="${null===(e=this._config)||void 0===e?void 0:e.title}">${o}</ha-card>`:L`${o}`}};Ee.styles=ve,t([st({attribute:!1})],Ee.prototype,"hass",void 0),t([st({attribute:!1})],Ee.prototype,"locale",void 0),t([rt()],Ee.prototype,"_config",void 0),Ee=t([nt("energy-period-selector-plus")],Ee);class De extends TypeError{constructor(t,e){let o;const{message:n,...i}=t,{path:s}=t;super(0===s.length?n:"At path: "+s.join(".")+" -- "+n),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var n;return null!=(n=o)?n:o=[t,...e()]}}}function Ce(t){return"object"==typeof t&&null!=t}function ke(t){return"string"==typeof t?JSON.stringify(t):""+t}function Te(t,e,o,n){if(!0===t)return;!1===t?t={}:"string"==typeof t&&(t={message:t});const{path:i,branch:s}=e,{type:r}=o,{refinement:a,message:l="Expected a value of type `"+r+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+ke(n)+"`"}=t;return{value:n,type:r,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:l}}function*xe(t,e,o,n){(function(t){return Ce(t)&&"function"==typeof t[Symbol.iterator]})(t)||(t=[t]);for(const i of t){const t=Te(i,e,o,n);t&&(yield t)}}function*Pe(t,e,o){void 0===o&&(o={});const{path:n=[],branch:i=[t],coerce:s=!1,mask:r=!1}=o,a={path:n,branch:i};if(s&&(t=e.coercer(t,a),r&&"type"!==e.type&&Ce(e.schema)&&Ce(t)&&!Array.isArray(t)))for(const o in t)void 0===e.schema[o]&&delete t[o];let l=!0;for(const o of e.validator(t,a))l=!1,yield[o,void 0];for(let[o,c,d]of e.entries(t,a)){const e=Pe(c,d,{path:void 0===o?n:[...n,o],branch:void 0===o?i:[...i,c],coerce:s,mask:r});for(const n of e)n[0]?(l=!1,yield[n[0],void 0]):s&&(c=n[1],void 0===o?t=c:t instanceof Map?t.set(o,c):t instanceof Set?t.add(c):Ce(t)&&(t[o]=c))}if(l)for(const o of e.refiner(t,a))l=!1,yield[o,void 0];l&&(yield[void 0,t])}class Me{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:e,schema:o,validator:n,refiner:i,coercer:s=(t=>t),entries:r=function*(){}}=t;this.type=e,this.schema=o,this.entries=r,this.coercer=s,this.validator=n?(t,e)=>xe(n(t,e),e,this,t):()=>[],this.refiner=i?(t,e)=>xe(i(t,e),e,this,t):()=>[]}assert(t){return He(t,this)}create(t){return function(t,e){const o=Oe(t,e,{coerce:!0});if(o[0])throw o[0];return o[1]}(t,this)}is(t){return function(t,e){return!Oe(t,e)[0]}(t,this)}mask(t){return function(t,e){const o=Oe(t,e,{coerce:!0,mask:!0});if(o[0])throw o[0];return o[1]}(t,this)}validate(t,e){return void 0===e&&(e={}),Oe(t,this,e)}}function He(t,e){const o=Oe(t,e);if(o[0])throw o[0]}function Oe(t,e,o){void 0===o&&(o={});const n=Pe(t,e,o),i=function(t){const{done:e,value:o}=t.next();return e?void 0:o}(n);if(i[0]){return[new De(i[0],(function*(){for(const t of n)t[0]&&(yield t[0])})),void 0]}return[void 0,i[1]]}function Ne(t,e){return new Me({type:t,schema:null,validator:e})}function Ie(){return Ne("any",(()=>!0))}function Le(){return Ne("boolean",(t=>"boolean"==typeof t))}function Re(t){const e=t?Object.keys(t):[],o=Ne("never",(()=>!1));return new Me({type:"object",schema:t||null,*entries(n){if(t&&Ce(n)){const i=new Set(Object.keys(n));for(const o of e)i.delete(o),yield[o,n[o],t[o]];for(const t of i)yield[t,n[t],o]}},validator:t=>Ce(t)||"Expected an object, but received: "+ke(t),coercer:t=>Ce(t)?{...t}:t})}function je(t){return new Me({...t,validator:(e,o)=>void 0===e||t.validator(e,o),refiner:(e,o)=>void 0===e||t.refiner(e,o)})}function Be(){return Ne("string",(t=>"string"==typeof t||"Expected a string, but received: "+ke(t)))}const ze=async()=>{var t,e;if(customElements.get("ha-form"))return;const o=await(null===(e=(t=window).loadCardHelpers)||void 0===e?void 0:e.call(t));if(!o)return;const n=await o.createCardElement({type:"entity"});n&&await n.getConfigElement()};let Ue=class extends et{constructor(){super(...arguments),this._schema=jt(((t,e)=>[{type:"grid",name:"",schema:[{name:"card_background",selector:{boolean:{}}},{name:"prev_next_buttons",selector:{boolean:{}}}]},{type:"grid",name:"",schema:[{name:"compare_button_type",selector:{select:{options:[{value:"",label:""},{value:"icon",label:fe("editor.fields.compare_button_options.icon")},{value:"text",label:fe("editor.fields.compare_button_options.text")}],mode:"dropdown"}}},...t?[{name:"compare_button_label",selector:{text:{}}}]:[]]},{name:"today_button_type",selector:{select:{options:[{value:!1,label:""},{value:"icon",label:fe("editor.fields.compare_button_options.icon")},{value:"text",label:fe("editor.fields.compare_button_options.text")}],mode:"dropdown"}}},{type:"grid",name:"",schema:[{type:"multi_select",options:{day:fe("editor.fields.period_buttons_options.day"),week:fe("editor.fields.period_buttons_options.week"),month:fe("editor.fields.period_buttons_options.month"),year:fe("editor.fields.period_buttons_options.year"),custom:fe("editor.fields.period_buttons_options.custom")},name:"period_buttons",default:["day","week","month","year"]},...e?[{name:"custom_period_label",selector:{text:{}}}]:[]]}])),this._computeLabelCallback=t=>fe(`editor.fields.${t.name}`)||`not found: ${t.name}`}async setConfig(t){He(t,function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];const n="type"===e[0].type,i=e.map((t=>t.schema)),s=Object.assign({},...i);return n?function(t){const e=Object.keys(t);return new Me({type:"type",schema:t,*entries(o){if(Ce(o))for(const n of e)yield[n,o[n],t[n]]},validator:t=>Ce(t)||"Expected an object, but received: "+ke(t)})}(s):Re(s)}(Re({type:Be(),view_layout:je(Be())}),Re({card_background:je(Le()),today_button:je(Le()),prev_next_buttons:je(Le()),compare_button_type:je(Be()),today_button_type:je(Ie()),period_buttons:je(Ie()),custom_period_label:je(Be()),compare_button_label:je(Be())}))),this._config=t}connectedCallback(){super.connectedCallback(),ze()}render(){var t,e,o,n,i,s;if(!this.hass||!this._config)return j;const r=Object.assign(Object.assign({},this._config),{card_background:null!==(t=this._config.card_background)&&void 0!==t&&t,today_button:null===(e=this._config.today_button)||void 0===e||e,prev_next_buttons:null===(o=this._config.prev_next_buttons)||void 0===o||o,compare_button_type:null!==(n=this._config.compare_button_type)&&void 0!==n?n:"",today_button_type:null!==(i=this._config.today_button_type)&&void 0!==i?i:"text",period_buttons:null!==(s=this._config.period_buttons)&&void 0!==s?s:["day","week","month","year"]}),a=this._schema("text"===r.compare_button_type,r.period_buttons.includes("custom"));return L`<ha-form .hass="${this.hass}" .data="${r}" .schema="${a}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form>`}_valueChanged(t){!function(t,e,o,n){n=n||{},o=null==o?{}:o;var i=new Event("config-changed",{bubbles:void 0===n.bubbles||n.bubbles,cancelable:Boolean(n.cancelable),composed:void 0===n.composed||n.composed});i.detail=o,t.dispatchEvent(i)}(this,0,{config:null==t?void 0:t.detail.value})}static get styles(){return r`ha-form{width:100%}ha-icon-button{align-self:center}.card-config{display:flex;flex-direction:column;justify-content:space-between;align-items:center;margin-bottom:10px}.config-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%}.config-header.sub-header{margin-top:24px}ha-icon{padding-bottom:2px;position:relative;top:-4px;right:1px}`}};t([st({attribute:!1})],Ue.prototype,"hass",void 0),t([rt()],Ue.prototype,"_config",void 0),Ue=t([nt("energy-period-selector-editor")],Ue);var Ve=Object.freeze({__proto__:null,loadHaForm:ze,get EnergyPeriodSelectorEditor(){return Ue}});export{Ee as EnergyPeriodSelectorPlus};
